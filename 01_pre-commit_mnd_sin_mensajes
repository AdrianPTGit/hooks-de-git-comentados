#!/bin/sh
# Hook pre-commit: se ejecuta antes de hacer git commit

#Este es un hook pre-commit sencillo que sirve para bloquear commits con mensajes demasiado gen√©ricos, como ‚ÄúUpdate‚Äù o ‚ÄúFix‚Äù.
#Aqu√≠ tienes el c√≥digo completamente comentado y explicado l√≠nea a l√≠nea üëá

#Indica que el script debe ejecutarse con el int√©rprete sh.
#El comentario aclara que este hook se ejecuta autom√°ticamente antes de crear el commit.
#Su prop√≥sito es realizar verificaciones previas y, si algo falla, cancelar el commit.


echo "Ejecutando hook pre-commit..."
#Muestra un mensaje inicial para indicar que el hook se est√° ejecutando.
#Es √∫til para confirmar que Git lo est√° detectando correctamente.

# 
COMMIT_MSG=$(git log -1 --pretty=%B)

#Intenta obtener el mensaje del √∫ltimo commit usando git log -1 --pretty=%B.
#Sin embargo, esto no es correcto para un hook pre-commit, ya que el commit a√∫n no se ha creado.
#Este comando devuelve el mensaje del √∫ltimo commit existente, no el nuevo.

#Para obtener el mensaje actual que el usuario est√° escribiendo, deber√≠as usar el hook commit-msg (no pre-commit), 
#porque solo commit-msg recibe como par√°metro el archivo temporal con el texto del commit.

if [ "$COMMIT_MSG" = "Update" ] || [ "$COMMIT_MSG" = "Fix" ]; then
    echo "XXX"
    exit 1
fi

#Comprueba si el mensaje del commit es exactamente "Update" o "Fix".
#Si lo es:

#Muestra "XXX" (deber√≠a reemplazarse por un mensaje m√°s claro, por ejemplo:
#"Error: el mensaje de commit es demasiado gen√©rico. Usa algo m√°s descriptivo.")

#Sale con c√≥digo 1, lo que bloquea el commit.

echo "Todo correcto. Se realizar√° el commit."

#Muestra un mensaje confirmando que no hay problemas y el commit puede continuar.

#En resumen

#Este hook intenta evitar commits con mensajes gen√©ricos como ‚ÄúUpdate‚Äù o ‚ÄúFix‚Äù.

#Tipo de hook	    Momento en que se ejecuta	                            Mejor uso
#------------------------------------------------------------------------------------------------------------------
#pre-commit	        Antes de crear el commit	                            Revisar c√≥digo, ejecutar tests, etc.
#commit-msg	        Justo despu√©s de escribir el mensaje del commit	        Revisar o validar el texto del mensaje
#commit-msg	        Justo despu√©s de escribir el mensaje del commit	        Revisar o validar el texto del mensaje